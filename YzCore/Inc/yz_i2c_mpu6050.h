//
// Created by 32827 on 2023/11/10.
//

#ifndef REYZ_YZ_I2C_MPU6050_H
#define REYZ_YZ_I2C_MPU6050_H
#include "stm32f1xx.h"

#define YZ_MPU6050_I2C_TIMEOUT 1000

#define YZ_MPU6050_ADDRESS_AD0_LOW     0x68
#define YZ_MPU6050_ADDRESS_AD0_HIGH     0x69

#define YZ_MPU6050_ADDRESS_USE YZ_MPU6050_ADDRESS_AD0_LOW

#define YZ_MPU6050_WRITE_ADDRESS ((YZ_MPU6050_ADDRESS_USE<<1)+0)
#define YZ_MPU6050_READ_ADDRESS ((YZ_MPU6050_ADDRESS_USE<<1)+1)

#define YZ_MPU6050_REG_POWER1_ADDRESS 0x6B
#define YZ_MPU6050_REG_POWER1_RESET_VALUE 0b10000000
#define YZ_MPU6050_REG_POWER1_CLK_VALUE 0b00000001

#define YZ_MPU6050_REG_POWER2_ADDRESS 0x6C
///无待机和低功耗模式
#define YZ_MPU6050_REG_POWER2_RESET_VALUE 0b00000000

///中断控制寄存器
#define YZ_MPU6050_REG_INT_ADDRESS 0x38
#define YZ_MPU6050_REG_INT_CLOSE_VALUE 0x00

///采样频率
#define YZ_MPU6050_REG_SIMPLE_RATE_ADDRESS 0x19
#define YZ_MPU6050_REG_SIMPLE_RATE_MOST_VALUE 0x007

///低通滤波设置
#define YZ_MPU6050_REG_DLPF_ADDRESS  0x1A
#define YZ_MPU6050_REG_DLPF_NORMAL_SET_VALUE 0x04

///陀螺仪配置(角速度)
#define YZ_MPU6050_REG_GYROSCOPE_ADDRESS 0x1B
#define YZ_MPU6050_REG_GYROSCOPE_NORMAL_SET_VALUE 0x18

///加速度配置
#define YZ_MPU6050_REG_ACCELEROMETER_ADDRESS 0x1C
#define YZ_MPU6050_REG_ACCELEROMETER_NORMAL_SET_VALUE 0x08

///INT 引脚/旁路配置
#define YZ_MPU6050_REG_INT_PIN_CFG_ADDRESS 0x37
#define YZ_MPU6050_REG_INT_PIN_CFG_NORMAL_SET_VALUE 0x02

///加速度相关寄存器
#define YZ_MPU6050_REG_ACCELEROMETER_X_HIGH_ADDRESS 0x3B
#define YZ_MPU6050_REG_ACCELEROMETER_X_LOW_ADDRESS 0x3C
#define YZ_MPU6050_REG_ACCELEROMETER_Y_HIGH_ADDRESS 0x3D
#define YZ_MPU6050_REG_ACCELEROMETER_Y_LOW_ADDRESS 0x3E
#define YZ_MPU6050_REG_ACCELEROMETER_Z_HIGH_ADDRESS 0x3F
#define YZ_MPU6050_REG_ACCELEROMETER_Z_LOW_ADDRESS 0x40
#define YZ_MPU6050_REG_ACCELEROMETER_X_ADDRESS 0x3B
#define YZ_MPU6050_REG_ACCELEROMETER_Y_ADDRESS 0x3D
#define YZ_MPU6050_REG_ACCELEROMETER_Z_ADDRESS 0x3F

///温度相关寄存器
#define YZ_MPU6050_REG_TEMPERATURE_HIGH_ADDRESS 0x41
#define YZ_MPU6050_REG_TEMPERATURE_LOW_ADDRESS 0x42
#define YZ_MPU6050_REG_TEMPERATURE_ADDRESS 0x41

///陀螺仪相关寄存器
#define YZ_MPU6050_REG_GYROSCOPE_X_HIGH_ADDRESS 0x43
#define YZ_MPU6050_REG_GYROSCOPE_X_LOW_ADDRESS 0x44
#define YZ_MPU6050_REG_GYROSCOPE_Y_HIGH_ADDRESS 0x45
#define YZ_MPU6050_REG_GYROSCOPE_Y_LOW_ADDRESS 0x46
#define YZ_MPU6050_REG_GYROSCOPE_Z_HIGH_ADDRESS 0x47
#define YZ_MPU6050_REG_GYROSCOPE_Z_LOW_ADDRESS 0x48
#define YZ_MPU6050_REG_GYROSCOPE_X_ADDRESS 0x43
#define YZ_MPU6050_REG_GYROSCOPE_Y_ADDRESS 0x45
#define YZ_MPU6050_REG_GYROSCOPE_Z_ADDRESS 0x47

HAL_StatusTypeDef yz_mpu6050_open(I2C_HandleTypeDef *hi2c);
HAL_StatusTypeDef yz_mpu6050_get_reg8_data(I2C_HandleTypeDef *hi2c,uint8_t address,uint8_t *data);
HAL_StatusTypeDef yz_mpu6050_get_reg16_data(I2C_HandleTypeDef *hi2c,uint8_t address,uint16_t *data);
#endif //REYZ_YZ_I2C_MPU6050_H
